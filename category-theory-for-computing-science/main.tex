\input{preamble.sty}

\begin{document}

\section{Preliminaries}

Skipped due to triviality.

\section{Categories}

\subsection{Basic definitions}

\begin{exercise}
    Prove that sets (as objects) and injective functions (as arrows) form a category with functional composition as the composition operation \(c\).
\end{exercise}
\begin{solution}
    Take \(id_A\) to be \(x \mapsto x\), then \(\id_A \circ f = f\) and \(g \circ \id_A = g\) is trivial. The last thing to check is that \(g \circ f\) is injective, that is, whenever \(s \neq s'\), then \(g(f(s)) \neq g(f(s'))\). By injectivity of \(f\), we have \(f(s) \neq f(s')\) and by injectivity of \(g\) we have \(g(f(s)) \neq g(f(s'))\).
\end{solution}

\begin{exercise}
    Do the same as Exercise 1 for sets and surjective functions.
\end{exercise}
\begin{solution}
    Let \(f : A \to B, g : B \to C\) be injective functions. Then \(f(A) = B, g(B) = C \Rightarrow g(f(A)) = C\).
\end{solution}

\begin{exercise}
    Show that composition of relations (2.1.14) is associative.
\end{exercise}
\begin{solution}
    Let \(\alpha, \beta, \gamma\) be relations from \(A\) to \(B\), from \(B\) to \(C\) and from \(C\) to \(D\).
    \begin{align*}
        \alpha \circ \beta \circ \gamma
         & = \{(a, c) \mid \exists b : (a, b) \in \alpha, (b, c) \in \beta\} \circ \gamma          \\
         & = \{(a, d) \mid \exists b, c : (a, b) \in \alpha, (b, c) \in \beta, (c, d) \in \gamma\} \\
         & = \alpha \circ (\beta \circ \gamma)
    \end{align*}
\end{solution}

\begin{exercise}
    Prove the following for any arrow \(u : A \to A\) of a category \(\mathcal{C}\). It follows from these facts that C--3 and C--4 of 2.1.3. characterize the identity arrows of a category.
    \begin{enumerate}
        \item If \(g \circ u = g\) for every object \(B\) of \(\mathcal{C}\) and arrow \(g : A \to B\), then \(u = \id_A\).
        \item If \(u \circ h = h\) for every object \(C\) of \(\mathcal{C}\) and arrow \(h : C \to A\), then \(u = \id_A\).
    \end{enumerate}
\end{exercise}
\begin{solution}\itemfix
    \begin{enumerate}
        \item \(\id_A \circ u \defeq u\), but also \(\id_A \circ u = \id_A\) by assumption. \(\Rightarrow u = \id_A\).
        \item \(u \circ \id_A \defeq u\), but also \(u \circ \id_A = \id_A\) by assumption. \(\Rightarrow u = \id_A\).
    \end{enumerate}
\end{solution}

\subsection{Functional programming languages}

\begin{exercise}
    \(\texttt{nonzero}: \texttt{NAT} \to \texttt{BOOLEAN}\), subject to equations \(\texttt{nonzero} \circ \texttt{succ} = \texttt{false}\) and \(\texttt{nonzero} \circ \texttt{succ} = \texttt{true}\).
\end{exercise}

\subsection{Mathematical structures as categories}

\begin{exercise}
    For which sets \(A\) is \(F(A)\) a commutative monoid?
\end{exercise}
\begin{solution}
    \(F(A)\) is always a monoid, so the only property to check is commutativity. If \(A = \{\}\), then \(F(A) = \{\}\) and is vacuously commutative. If \(A = \{a\}\), then \(F(A) = \{(), (a), (a, a), \dots\}\) and is commutative. Otherwise, if \(A\) has at least two elements, \(a\) and \(b\), \((a)(b) = (a, b)\), but \((b)(a) = (b, a) \neq (a, b)\), therefore it is not commutative. All in all, \(|A| \leq 1 \Leftrightarrow F(A)\) is commutative.
\end{solution}
\begin{exercise}
    Prove that for each object \(A\) in a category \(\mathcal{C}\), \(\hom(A, A)\) is a monoid with composition of arrows as the operation.
\end{exercise}
\begin{solution}
    Take \(\id_A\) as the identity element. Then \(\id_A \circ f = f \circ \id_A = f\) by definition of \(\id\). \(\hom(A, A)\) is closed under composition.
\end{solution}
\begin{exercise}
    Prove that a semigroup has at most one identity element.
\end{exercise}
\begin{solution}
    Let \(e_1, e_2\) be identity elements. Then \(e_2 = e_1 e_2 = e_1\), so the identity elements are equal. This is very similar to exercise 2.1.4.
\end{solution}

\subsection{Categories of sets with structure}

\begin{exercise}
    Let \((S, \alpha)\) and \((T, \beta)\) be sets with relations on them. A \textbf{homomorphism} from \((S, \alpha)\) to \((T, \beta)\) is a function \(f : S \to T\) with the property that if \(x \alpha y\) in \(S\) then \(f(x) \beta f(y)\) in \(T\).
    \begin{enumerate}
        \item Show that sets with relations and homomorphisms between them form a category.
        \item Show that if \((S, \alpha)\) and \((T, \beta)\) are both posets, then \(f : S \to T\) is a homomorphism of relations if and only if it is a monotone map.
    \end{enumerate}
\end{exercise}
\begin{solution}\itemfix
    \begin{enumerate}
        \item Take the identity map as \(\id_A\). It is obviously a homomorphism. \(\id_A \circ f = f \circ \id_A = f\) holds. Transitivity also holds:
              \[x \alpha y \Rightarrow f(x) \beta f(y) \Rightarrow g(f(x)) \gamma g(f(y))\]
        \item By definition.
    \end{enumerate}
\end{solution}

\begin{exercise}
    Show that (strict) \(\omega\)-complete partial orders and (strict) continuous functions form a category.
\end{exercise}
\begin{solution}
    Take the identity map as \(\id_A\), which is clearly (strict) continuous. \(\id_A \circ f = f \circ \id_A = f\) clearly holds. Composition \(g \circ f\) of continuous functions is continuous:
    \[s = \sup \mathcal{C} \Rightarrow f(s) = \sup f(\mathcal{C}) \Rightarrow g(f(s)) = \sup g(f(\mathcal{C}))\]
    Same holds for strictness:
    \[g(f(\bot)) = g(\bot) = \bot\]
\end{solution}

\begin{exercise}
    Let \(\R^+\) be the set of nonnegative real numbers. Show that the poset \((\R^+ , \leq)\) is not an \(\omega\)-CPO.
\end{exercise}
\begin{solution}
    Let \(\mathcal{C}\) be \((1, 2, \dots )\). Suppose it has a supremum \(s\). \(\lfloor s \rfloor + 1 \in \mathcal{C}\) and is greater than \(s\), therefore \(s\) is not the supremum.
\end{solution}

\begin{exercise}
    Show that for every set \(S\), the poset \((\mathcal{P}(S), \subseteq)\) is a strict \(\omega\)-CPO.
\end{exercise}
\begin{solution}
    Let \(\mathcal{C}\) be \((s_1, s_2 \dots )\). Let \(S' = \bigcup_{i = 1}^{\infty} \). By definition \(\forall i \ \ s_i \subseteq S'\) and if any other \(S''\) has this property, then \(S' \subseteq S''\) because otherwise \(\exists s \in S'' : s \notin S'\) which implies that \(\exists i : s_i \not\subseteq S''\). The bottom is \(\bot\).
\end{solution}

\begin{exercise}
    Give an example of \(\omega\)-CPOs with a monote map between them that is not continuous.
\end{exercise}
\begin{solution}
    Let the underlying set be \(\Z \cup \{a, b\}\), and the order be the standart \(\leq\) on integers, and \(\forall i \in \Z \ \ i \leq a \leq b\). Then let \(f\) be:
    \[f(x) = \begin{cases}
            x, & x \in \Z           \\
            b, & \mathrm{otherwise}
        \end{cases}\]
    \(f\) is monotone since on \(\Z\) it is the indentity map, and \(b = f(a) \leq f(b) = b\). It is not continuous because the chain \(\mathcal{C}\) defined as \((0, 1, \dots)\) has \(a\) as its supremum, but \(\sup f(\mathcal{C}) = \sup \mathcal{C} = a \neq f(a) = b\).
\end{solution}

\begin{exercise}
    Let \(g : \N \to \N\) be tge function such that \(f(n) = 2^n\). Exhibit \(g\) as the least fixed point of a continuous function \(\psi : \mathscr{P} \to \mathscr{P}\).
\end{exercise}
\begin{solution}
    \(\psi(h)(n) = \begin{cases}
        1            & n = 0 \\
        2 * h(n - 1) & n > 0
    \end{cases}\)
\end{solution}

\begin{exercise}
    Exhibit the Fibonacci function as the least fixed point of a continuous function from an \(\omega\)-CPO to itself.
\end{exercise}
\begin{solution}
    \(\psi(h)(n) = \begin{cases}
        1                   & n = 0 \\
        1                   & n = 1 \\
        h(n - 1) + h(n - 2) & n > 1
    \end{cases}\)
\end{solution}

\end{document}
